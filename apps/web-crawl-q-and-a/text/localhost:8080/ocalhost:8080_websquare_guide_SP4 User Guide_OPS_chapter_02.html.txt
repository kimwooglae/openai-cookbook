
엔진 설치2.엔진 설치2.1설치웹스퀘어 서버 설치 가이드를 참고하십시오.2.2설정WebSquare5 엔진은 아래와 같이 두 가지 설정 파일을 사용합니다.config.xml브라우저 상의 UI 화면 출력과 관련된 내용을 설정websquare.xmlWebSquare5 Engine의 동작과 관련된 내용을 설정2.2.1config.xml표 2-1.config.xml위치/websquare/config.xml설정 내용브라우저 상의 UI 화면 출력과 관련된 내용동작항상 서버에서 읽어와야 함. 자세한 설정 항목은 36. config.xml 참조.2.2.2websquare.xml표 2-2.websquare.xml위치${WEBSQUARE_HOME}/config/websquare.xml설정 내용WebSquare5 Engine의 동작과 관련된 내용WebSquare 엔진 모듈 처리 설정Excel, CSV 업로드/다운로드 설정Framework 연계관련 adaptor 설정다국어 처리 설정WebSquare Hybrid 관련 설정자세한 설정 항목은 37. websquare.xml 참조.2.3업데이트WebSquare Studio를 시작합니다.[Window]-[Preferences]를 선택합니다.[WebSquare]-[Embedded Engine]를 선택합니다.현재 설치된 Engine 버전을 확인합니다.그림 2-1.엔진 버전 확인Add를 클릭하여 Engine 파일을 추가합니다. (zip 확장명의 압축 파일로, 압축 해제할 필요는 없습니다.) 새 Engine이 추가되는 과정은 오른쪽 아래의 상태 진행 창에서 확인할 수 있습니다. 100% 완료되면 새로운 Engine이 성공적으로 추가됩니다.새 버전의 Engine을 선택하고 OK 버튼을 클릭하면 스튜디오가 재 시작되며 새로운 Engine으로 바뀌어 있는 것을 확인할 수 있습니다.2.4설치 관련 문제 해결본 단락은 WebSquare5 엔진 설치 시 발생할 수 있는 주요 상황 및 그 해결책을 정리한 것입니다. 아래의 이슈에 대한 해결책을 참고하십시오.표 2-3.설치 이슈 및 해결 방법No.이슈12.4.1 "WebSquare.startApplication is not function"22.4.2 WebServer와 WAS 분리32.4.3 javascript.wq?q=/bootloader 404 error42.4.4 javascript.wq?q=/bootloader 400(Bad Request) error52.4.5 websquare.html 전송 이후 반응이 없을 때62.4.6 WEBSQUARE_HOME 설정72.4.7 솔라리스OS 에서 CPU코어 개수 확인82.4.8 설치/패치 시 충돌 가능 jar 목록92.4.9 JBOSS 설치 시 유의사항102.4.10 설치 할 때 확인해야 할 contentType112.4.11 웹로직 설치 시 web.xml 파일에 mime-mapping 설정122.4.12 JEUS에서 한글이 깨지는 경우132.4.13 웹서버가 SUN iplanet(혹은 웹티어)인 경우142.4.14 WAS가 websphere 일 경우 web.xml 추가 설정2.4.1"WebSquare.startApplication is not function"WebSquare.startApplication is not function" 경고 창이 나올 경우 래의 방법으로 확인하십시오.브라우저 개발자도구에서 config.xml의 유형(MIME-Type)을 확인합니다. 정상인 경우 application/xml이 표시되어야 합니다. ("text/html" 등으로 표시되면 오류입니다.)그림 2-2.MIME-Type 확인JEUS 6 혹은 webtob인 경우, http.m의 xml 관련 MIME-Type을 확인합니다."xml MimeType = "application/xml", SVRTYPE = HTML"인지 확인합니다.2.4.2WebServer와 WAS 분리WebServer와 WAS를 분리해서 사용할 경우, .jar 및 .jsp 파일은 WAS에 나머지 파일은 WebServer에 저장하십시오.WebServer와 WAS에 동일한 폴더 구조를 구성합니다.# engine , externalJS, fiddle, uiplugin 폴더를 확인하십시오# 특히 externalJS 하위의 editor 폴더에는 같은 이름의 .js 파일이 존재할 수 있습니다.이후 웹스퀘어 화면 file은 모두 WebServer의 해당 경로로 업로드 해야합니다. (WAS에 올릴 경우, xml 헤더 중복 에러가 발생할 수 있습니다.)브라우저 개발자 도구에서 GET /websquare/javascript.wq?q=/bootloader 이상 진행하지 못하는 경우, .wq 관련 설정을 확인하십시오.그림 2-3.WebServer 폴더 구조 (예)그림 2-4.WAS 폴더 구조 (예)WebServer 및 WAS 설정 과정에서 .wq 처리가 필요하기 때문에 서버 엔지니어 지원이 필요합니다.2.4.3javascript.wq?q=/bootloader 404 errorWebSquare5를 정상 설치했으나 페이지 로딩 시 javascript.wq?q=/bootloader 404  error가 발생할 수 있습니다. 이 경우 다음을 확인하십시오.WAS 및 WebServer가 설치 경로를 정확히 바라보고 있는가? (일반적인 html파일 등을 올려놓고 확인 가능)WAS 및 WebServer에 설치된 WebSquare5의 권한은 어떠한가?2.4.4javascript.wq?q=/bootloader 400(Bad Request) errorWebSquare5를 정상 설치했으나 페이지 로딩 시 javascript.wq?q=/bootloader 400 error  가 발생할수 있습니다. 이 경우 다음을 확인하십시오.클라이언트의 잘못된 파라미터 정보 또는 타입 request 시 발생합니다.spring, @requestParm 어노테이션 사용 시 빈 파라미터 일 때 ( required = false 처리 필요 )http 전송 header 크기 또는 header의 특정 값 (apache의 경우 크기 조정 가능)브라우저 캐시 및 쿠키, 설정상의 문제웹방화벽 문제웹 방화벽에서 해당 페이지 예외 처리 후, 정상 수행되는 것을 확인합니다.웹 방화벽에서 해당 페이지 예외 처리 후, 정상 수행되는 것을 확인합니다.2.4.5websquare.html 전송 이후 반응이 없을 때개발자 도구에서 확인 결과 websquare.html 은 Status 200으로 정상인 경우에도 아무런 반응이 없을 수 있습니다. Window Server에 설치를 마친 후, 서버를 기동하고 Test페이지를 열어본 순간 아무런 반응이 없을 때가 있습니다. OS에 Chrome이 설치된 경우 아래의 테스트를 수행하십시오.Chrome에서는 정상, IE에서는 반응이 없다면, IE – 인터넷 옵션 – 신뢰할 수 있는 사이트 – 사이트 – 추가를 선택합니다. 해당 주소를 신뢰할 수 있는 사이트로 등록합니다. http://{해당주소}/websquare/javascript.wq?q=/bootloader 를 실행하여 메시지를 확인합니다. Chrome에서도 반응이 없다면, 설치 과정에 문제가 있는지 확인하십시오. (개발자 도구의 Network등)Window Server는 설치 직후 기본적인 보안 관련 제약 사항이 강력하게 설정되어 있습니다. 해당 OS에 해당 브라우져로 실행 했을 때 발생하는 문제입니다.2.4.6WEBSQUARE_HOME 설정해당 서버를 실행시키는 startUCMS1.sh 셀 스크립트를 아래와 같이 수정하십시오.2.4.7솔라리스OS 에서 CPU코어 개수 확인psrinfo -pv 명령어로 확인하십시오.아래 예제의 경우 CPU 코어 개수는 총 16개입니다2.4.8설치/패치 시 충돌 가능 jar 목록기존에 서비스가 있는 곳에 설치/패치 시, 충돌 날 수 있는 jar 파일은 아래와 같습니다.사이트의 JAR 파일WebSquare의 JAR 파일비고crimson.jarxml_apis.jarDocumentBuilderFactory.class 이하 충돌아래와 같은 에러 메시지가 발생합니다.코드 2-1.에러 메시지WAS:Upload library(commons-fileupload-1.2.jar) loading error occurred. If file upload wasn't needed, turn off file upload in configuration file(websquare.xml). 이하 생략...2.4.9JBOSS 설치 시 유의사항web.xml 에 <display-name> 태그가 없으면 정상적으로 .war 폴더를 로딩할 수 없습니다. display-name에 해당 .war 이름을 명시합니다.해당 WEB-INF 폴더에 jboss-web.xml 파일이 없으면 정상적으로 해당 폴더를 로딩할 수 없습니다.jboss 모든 버전에서 class-loading 관련 설정이 필요합니다.해당 .war 폴더에 WEB-INF를 구성해도 무방합니다. (WAS 엔지니어와 확인 필요.)2.4.10설치 할 때 확인해야 할 contentType설치 시 확인 해야 할 content-Type은 아래와 같습니다. websquare 기동 시 오류가 발생할 경우 개발자 도구를 통해 아래 내용을 확인하십시오. 잘못된 경우 WebsSrver 또는 WAS의 mime-type을 확인하십시오.confg.xml - application/xmlwebsquare.html - text/htmljavascriptPluginAll.wq - text/javascript화면 xml - application/xml2.4.11웹로직 설치 시 web.xml 파일에 mime-mapping 설정web.xml 파일에 아래 내용을 추가하십시오.코드 2-2.mime-mapping 설정<mime-mapping>
    <extension>xml</extension>
    <mime-type>application/xml</mime-type>
</mime-mapping>2.4.12JEUS에서 한글이 깨지는 경우DB 등에서 조회한 값은 정상 호출하지만 WebSquare XML 파일의 한글이 깨지는 경우가 있습니다. 이 경우 아래 내용을 확인합니다.config.xml 등의 한글 주석 등이 깨져있는가?XML 파일만 응답 헤더가 contentType = application/xml;charSet=ISO_8859_1인가? (다른 확장자는 정상.)이 현상은 서버쪽의 인코딩 설정에 관련된 것일 수 있습니다. JEUS의 WEBMain.xml을 확인하십시오. 참고로 아래는 한글이 정상 출력되는 인코딩 예입니다.<encoding>
    <request-encoding>
        <default>UTF-8</default>
        <forced>UTF-8</forced>
    </request-encoding>
    <response-encoding>
        <default>UTF-8</default>
        <forced>UTF-8</forced>
    </response-encoding>
    <request-url-encoding>
        <default>UTF-8</default>
        <forced>UTF-8</forced>
    </request-url-encoding>
</encoding>2.4.13웹서버가 SUN iplanet(혹은 웹티어)인 경우웹서버가 iplanet (혹은 웹티어) 인경우, .wq 확장자에 대한 처리 및 mime-type 설정이 약간 복잡합니다. 이 경우 아래 내용을 확인하십시오.설정 파일 위치를 확인합니다.아래 예제의 경우 mime.types 및 XXXX_obj.conf 파일을 변경해야합니다. (경우에 따라서magnus.conf를 변경할 때도 있습니다.# mime-type을 설정합니다. (예: type=text/wq exts=wq)다음은 XXXX_obj.conf 설정 예시입니다. ppath=".wq" 부분을 참고하십시오.웹로직 연계와 관련된 Object가 있다면, 복사하여 .wq 요청에 관련된 내용만 변경해서 사용할 수 있습니다.2.4.14WAS가 websphere 일 경우 web.xml 추가 설정상황조치 사항WebServer(IHS, IBM Http Server)와 WAS(Websphere)가 있고, 모든 요청을 WAS에서 처리.일반적인 web - contextRoot에 WebSquare를 설치 한 후 WAS 재기동.샘플 페이지로 접속 시도.websquare.html 파일은 정상적으로 가져오지만 javascript.wq 요청에 대해 404 에러 발생.다른 곳에 있는web.xml에 websquare servlet을 설정하여 정상 작동 확인. web.xml의 대략적인 경로:Appserver/progiles/Appsvr1/config/cells/.../deployments/ ... / WEB-INF/web.xml.Websphere만의 특성인지는 추가 확인이 필요.
